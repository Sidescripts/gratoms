<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Admin — Balance Control</title>
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Mono:wght@300;400;500&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --bg:        #0a0a0f;
      --surface:   #11111a;
      --border:    #1e1e2e;
      --accent:    #00e5a0;
      --accent2:   #ff4d6d;
      --text:      #e8e8f0;
      --muted:     #5a5a78;
      --card:      #13131f;
      --glow:      rgba(0, 229, 160, 0.15);
      --glow2:     rgba(255, 77, 109, 0.15);
    }

    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'DM Mono', monospace;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      overflow-x: hidden;
    }

    body::before, body::after {
      content: '';
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: -2;
    }

    body::before {
      background-image: linear-gradient(rgba(0,229,160,0.03) 1px, transparent 1px),
                        linear-gradient(90deg, rgba(0,229,160,0.03) 1px, transparent 1px);
      background-size: 40px 40px;
    }

    body::after {
      top: -200px; right: -200px;
      width: 600px; height: 600px;
      background: radial-gradient(circle, rgba(0,229,160,0.06) 0%, transparent 70%);
      z-index: -1;
    }

    /* ─── SIDEBAR ──────────────────────────────────────── */
    .sidebar {
      position: fixed;
      inset: 0 auto 0 0;
      width: 260px;
      background: var(--surface);
      border-right: 1px solid var(--border);
      color: var(--text);
      z-index: 1000;
      transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1);
      transform: translateX(0);
    }

    .sidebar-header {
      padding: 24px 20px;
      border-bottom: 1px solid var(--border);
      font-family: 'Syne', sans-serif;
      font-weight: 700;
      font-size: 1.4rem;
      color: var(--accent);
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .sidebar-nav ul {
      list-style: none;
      padding: 16px 0;
    }

    .sidebar-nav a {
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 14px 20px;
      color: var(--muted);
      text-decoration: none;
      font-size: 0.95rem;
      transition: all 0.22s ease;
    }

    .sidebar-nav a:hover,
    .sidebar-nav a.active {
      background: rgba(0,229,160,0.08);
      color: var(--accent);
    }

    .sidebar-nav a.active {
      border-left: 3px solid var(--accent);
      padding-left: 17px;
    }

    .sidebar-nav i { width: 20px; text-align: center; }

    /* Hamburger */
    .hamburger {
      position: fixed;
      top: 16px;
      left: 16px;
      z-index: 1200;
      background: transparent;
      border: none;
      color: var(--accent);
      font-size: 1.9rem;
      cursor: pointer;
      padding: 8px;
      display: none;
      transition: left 0.35s ease, color 0.25s ease;
    }

    body.sidebar-open .hamburger {
      left: auto;
      right: 16px;
      color: var(--accent2);
      z-index: 1300;
    }

    /* Overlay */
    .overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.65);
      z-index: 900;
      opacity: 0;
      visibility: hidden;
      transition: all 0.35s ease;
    }

    .overlay.active {
      opacity: 1;
      visibility: visible;
    }

    /* Main content wrapper */
    .main-content {
      position: relative;
      width: 100%;
      margin-left: 960px;
      padding: 48px 16px;
      transition: margin-left 0.35s ease;
    }

    /* ─── Original content layout restored ─────────────── */
    .wrapper {
      position: relative;
      z-index: 1;
      width: 100%;
      max-width: 540px;
    }

    .header { margin-bottom: 40px; animation: fadeDown 0.6s ease both; }
    .header-label { font-size: 11px; letter-spacing: 0.2em; color: var(--accent); text-transform: uppercase; margin-bottom: 8px; }
    .header h1 { font-family: 'Syne', sans-serif; font-size: clamp(28px, 5vw, 40px); font-weight: 800; line-height: 1.1; }
    .header h1 span { color: var(--accent); }
    .header p { margin-top: 10px; font-size: 13px; color: var(--muted); line-height: 1.6; }

    .tabs { display: grid; grid-template-columns: 1fr 1fr; background: var(--surface); border: 1px solid var(--border); border-radius: 12px; padding: 4px; margin-bottom: 28px; }
    .tab-btn { padding: 12px; border: none; background: transparent; border-radius: 8px; font-family: 'Syne', sans-serif; font-size: 14px; font-weight: 700; letter-spacing: 0.05em; cursor: pointer; transition: all 0.25s ease; color: var(--muted); }
    .tab-btn.add.active { background: var(--accent); color: #000; box-shadow: 0 0 20px var(--glow); }
    .tab-btn.sub.active { background: var(--accent2); color: #fff; box-shadow: 0 0 20px var(--glow2); }

    .card { background: var(--card); border: 1px solid var(--border); border-radius: 16px; padding: 32px; animation: fadeUp 0.6s 0.2s ease both; position: relative; overflow: hidden; }
    .card.add-mode::before { opacity: 1; background: linear-gradient(90deg, transparent, var(--accent), transparent); }
    .card.sub-mode::before { opacity: 1; background: linear-gradient(90deg, transparent, var(--accent2), transparent); }

    .field { margin-bottom: 20px; }
    label { display: block; font-size: 11px; letter-spacing: 0.15em; text-transform: uppercase; color: var(--muted); margin-bottom: 8px; }
    input, select { width: 100%; background: var(--surface); border: 1px solid var(--border); border-radius: 8px; padding: 14px 16px; font-family: 'DM Mono', monospace; font-size: 14px; color: var(--text); outline: none; }
    input:focus, select:focus { border-color: var(--accent); box-shadow: 0 0 0 3px rgba(0,229,160,0.08); }
    .sub-mode input:focus, .sub-mode select:focus { border-color: var(--accent2); box-shadow: 0 0 0 3px rgba(255,77,109,0.08); }

    .asset-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; }
    .asset-btn { padding: 12px 8px; background: var(--surface); border: 1px solid var(--border); border-radius: 8px; color: var(--muted); font-size: 13px; font-weight: 500; cursor: pointer; text-align: center; }
    .asset-btn.selected { border-color: var(--accent); color: var(--accent); background: rgba(0,229,160,0.06); }
    .sub-mode .asset-btn.selected { border-color: var(--accent2); color: var(--accent2); }

    .amount-wrap { position: relative; }
    .amount-prefix { position: absolute; left: 16px; top: 50%; transform: translateY(-50%); color: var(--muted); }
    .amount-wrap input { padding-left: 32px; }

    .btn { width: 100%; padding: 16px; border: none; border-radius: 10px; font-family: 'Syne', sans-serif; font-size: 15px; font-weight: 700; letter-spacing: 0.08em; cursor: pointer; margin-top: 8px; }
    .btn-add { background: var(--accent); color: #000; box-shadow: 0 4px 24px rgba(0,229,160,0.3); }
    .btn-sub { background: var(--accent2); color: #fff; box-shadow: 0 4px 24px rgba(255,77,109,0.3); }
    .btn.loading .spinner { display: block; }
    .btn.loading .btn-text { display: none; }

    .toast { position: fixed; bottom: 32px; left: 50%; transform: translateX(-50%) translateY(20px); background: var(--surface); border: 1px solid var(--border); border-radius: 10px; padding: 14px 24px; font-size: 13px; display: flex; align-items: center; gap: 10px; opacity: 0; transition: all 0.35s ease; z-index: 100; }
    .toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }
    .toast.success { border-color: var(--accent); }
    .toast.error { border-color: var(--accent2); }

    .log-section { margin-top: 28px; }
    .log-item { background: var(--surface); border: 1px solid var(--border); border-radius: 8px; padding: 12px 14px; display: flex; justify-content: space-between; font-size: 12px; }
    .log-amount.add { color: var(--accent); }
    .log-amount.sub { color: var(--accent2); }

    /* Spinner */
    .btn.loading .spinner {
      width: 20px;
      height: 20px;
      border: 3px solid #000;
      border-top: 3px solid transparent;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      display: inline-block;
    }

    @keyframes spin { to { transform: rotate(360deg); } }

    /* ─── RESPONSIVE ───────────────────────────────────── */
    @media (max-width: 1024px) {
      .sidebar { transform: translateX(-100%); }
      .sidebar.open { transform: translateX(0); }
      .main-content { margin-left: 0 !important; padding: 70px 16px 40px; }
      .hamburger { display: block; }
    }

    @media (max-width: 480px) {
      .wrapper { max-width: 100%; }
      .card { padding: 24px 18px; }
    }
  </style>
</head>
<body>

  <button class="hamburger" id="hamburgerBtn" aria-label="Toggle menu">
    <i class="fa-solid fa-bars"></i>
  </button>

  <div class="overlay" id="overlay"></div>

  <aside class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <i class="fa-solid fa-chart-line"></i>
      <h2>Admin Panel</h2>
    </div>
    <nav class="sidebar-nav">
      <ul>
        <li><a href="./adminDash.html"><i class="fa-solid fa-tachometer-alt"></i> Dashboard</a></li>
        <li><a href="./users.html"><i class="fa-solid fa-users"></i> Users</a></li>
        <li><a href="./manipulation.html" class="active"><i class="fa-solid fa-wallet"></i> Add / Subtract</a></li>
        <li><a href="./deposits.html"><i class="fa-solid fa-money-bill-wave"></i> Deposits</a></li>
        <li><a href="./withdrawal.html"><i class="fa-solid fa-wallet"></i> Withdrawals</a></li>
        <li><a href="./plans.html"><i class="fa-solid fa-chart-pie"></i> Investment plan</a></li>
        <li><a href="./investment.html"><i class="fa-solid fa-chart-pie"></i> Investments</a></li>
        <li><a href="./settings.html"><i class="fa-solid fa-cog"></i> Settings</a></li>
        <li><a href="../index.html" id="logoutBtn"><i class="fa-solid fa-sign-out-alt"></i> Logout</a></li>
      </ul>
    </nav>
  </aside>

  <div class="main-content">
    <div class="wrapper">

      <div class="header">
        <div class="header-label">// admin panel</div>
        <h1>Balance <span>Control</span></h1>
        <p>Manually adjust user crypto balances. All changes are permanent and logged.</p>
      </div>

      <div class="tabs">
        <button class="tab-btn add active" onclick="switchTab('add')">＋ Add Balance</button>
        <button class="tab-btn sub" onclick="switchTab('sub')">－ Subtract Balance</button>
      </div>

      <div class="card add-mode" id="card">
        <div class="field">
          <label>Username</label>
          <input type="text" id="username" placeholder="e.g. Tuga" autocomplete="off" />
        </div>

        <div class="field">
          <label>Asset</label>
          <div class="asset-grid">
            <button class="asset-btn selected" data-asset="USDT" onclick="selectAsset(this)"><span class="asset-icon">₮</span>USDT</button>
            <button class="asset-btn" data-asset="BTC" onclick="selectAsset(this)"><span class="asset-icon">₿</span>BTC</button>
            <button class="asset-btn" data-asset="ETH" onclick="selectAsset(this)"><span class="asset-icon">Ξ</span>ETH</button>
          </div>
        </div>

        <div class="field">
          <label>Amount</label>
          <div class="amount-wrap">
            <span class="amount-prefix">#</span>
            <input type="number" id="amount" placeholder="0.00" min="0" step="any" />
          </div>
        </div>

        <div class="divider"></div>

        <button class="btn btn-add" id="submitBtn" onclick="handleSubmit()">
          <span class="btn-text" id="btnText">ADD BALANCE</span>
          <span class="spinner"></span>
        </button>
      </div>

      <div class="log-section">
        <div class="log-header">
          <span class="log-title">// recent actions</span>
          <button class="log-clear" onclick="clearLog()">clear</button>
        </div>
        <div class="log-list" id="logList">
          <div class="log-empty" id="logEmpty">No actions yet</div>
        </div>
      </div>

    </div>
  </div>

  <div class="toast" id="toast">
    <span class="toast-dot"></span>
    <span id="toastMsg"></span>
  </div>

  <script>
    // Sidebar toggle + icon & position change
    const hamburger = document.getElementById('hamburgerBtn');
    const sidebar   = document.getElementById('sidebar');
    const overlay   = document.getElementById('overlay');
    const icon      = hamburger?.querySelector('i');

    function toggleSidebar() {
      const isOpen = sidebar.classList.toggle('open');
      overlay.classList.toggle('active');
      document.body.classList.toggle('sidebar-open', isOpen);

      if (icon) {
        icon.classList.toggle('fa-bars', !isOpen);
        icon.classList.toggle('fa-xmark', isOpen);
      }
    }

    if (hamburger) hamburger.addEventListener('click', toggleSidebar);
    if (overlay)   overlay.addEventListener('click', toggleSidebar);

    document.querySelectorAll('.sidebar-nav a').forEach(link => {
      link.addEventListener('click', () => {
        if (window.innerWidth <= 1024) toggleSidebar();
      });
    });

    document.addEventListener('keydown', e => {
      if (e.key === 'Escape' && sidebar.classList.contains('open')) toggleSidebar();
    });
  </script>

  <script src="../js/manipulation.js"></script>
</body>
</html>